<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: crc32</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">crc32</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md3578"></a></p>
<p>Standard CRC-32 algorithm implementation in JS (for the browser and nodejs). Emphasis on correctness, performance, and IE6+ support.</p>
<h1><a class="anchor" id="autotoc_md3579"></a>
Installation</h1>
<p>With <a href="https://www.npmjs.org/package/crc-32">npm</a>:</p>
<div class="fragment"><div class="line">$ npm install crc-32</div>
</div><!-- fragment --><p>When installed globally, npm installs a script <code>crc32</code> that computes the checksum for a specified file or standard input.</p>
<details >
<summary >
<b>CDN Availability</b> (click to show)</summary>
<p></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadRight">CDN   </th><th class="markdownTableHeadLeft">URL    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight"><code>unpkg</code>   </td><td class="markdownTableBodyLeft"><a href="https://unpkg.com/crc-32/">https://unpkg.com/crc-32/</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight"><code>jsDelivr</code>   </td><td class="markdownTableBodyLeft"><a href="https://jsdelivr.com/package/npm/crc-32">https://jsdelivr.com/package/npm/crc-32</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight"><code>CDNjs</code>   </td><td class="markdownTableBodyLeft"><a href="https://cdnjs.com/libraries/crc-32">https://cdnjs.com/libraries/crc-32</a>   </td></tr>
</table>
<p></p>
</details>
<h1><a class="anchor" id="autotoc_md3580"></a>
Integration</h1>
<p>Using NodeJS or a bundler:</p>
<div class="fragment"><div class="line">var CRC32 = require(&quot;crc-32&quot;);</div>
</div><!-- fragment --><p>In the browser, the <code>crc32.js</code> script can be loaded directly:</p>
<div class="fragment"><div class="line">&lt;script src=&quot;crc32.js&quot;&gt;&lt;/script&gt;</div>
</div><!-- fragment --><p>The browser script exposes a variable <code>CRC32</code>.</p>
<p>The script will manipulate <code>module.exports</code> if available . This is not always desirable. To prevent the behavior, define <code>DO_NOT_EXPORT_CRC</code>.</p>
<h2><a class="anchor" id="autotoc_md3581"></a>
CRC32C (Castagnoli)</h2>
<p>The module and CDNs also include a parallel script for CRC32C calculations.</p>
<p>Using NodeJS or a bundler:</p>
<div class="fragment"><div class="line">var CRC32C = require(&quot;crc-32/crc32c&quot;);</div>
</div><!-- fragment --><p>In the browser, the <code>crc32c.js</code> script can be loaded directly:</p>
<div class="fragment"><div class="line">&lt;script src=&quot;crc32c.js&quot;&gt;&lt;/script&gt;</div>
</div><!-- fragment --><p>The browser exposes a variable <code>CRC32C</code>.</p>
<p>The script will manipulate <code>module.exports</code> if available . This is not always desirable. To prevent the behavior, define <code>DO_NOT_EXPORT_CRC</code>.</p>
<h1><a class="anchor" id="autotoc_md3582"></a>
Usage</h1>
<p>In all cases, the relevant function takes an argument representing data and an optional second argument representing the starting "seed" (for rolling CRC).</p>
<p>The return value is a signed 32-bit integer.</p>
<ul>
<li><code>CRC32.buf(byte array or buffer[, seed])</code> assumes the argument is a sequence of 8-bit unsigned integers (nodejs <code>Buffer</code>, <code>Uint8Array</code> or array of bytes).</li>
<li><code>CRC32.bstr(binary string[, seed])</code> assumes the argument is a binary string where byte <code>i</code> is the low byte of the UCS-2 char: <code>str.charCodeAt(i) &amp; 0xFF</code></li>
<li><code>CRC32.str(string[, seed])</code> assumes the argument is a standard JS string and calculates the hash of the UTF-8 encoding.</li>
</ul>
<p>For example:</p>
<div class="fragment"><div class="line">// var CRC32 = require(&#39;crc-32&#39;);               // uncomment this line if in node</div>
<div class="line">CRC32.str(&quot;SheetJS&quot;)                            // -1647298270</div>
<div class="line">CRC32.bstr(&quot;SheetJS&quot;)                           // -1647298270</div>
<div class="line">CRC32.buf([ 83, 104, 101, 101, 116, 74, 83 ])   // -1647298270</div>
<div class="line"> </div>
<div class="line">crc32 = CRC32.buf([83, 104])                    // -1826163454  &quot;Sh&quot;</div>
<div class="line">crc32 = CRC32.str(&quot;eet&quot;, crc32)                 //  1191034598  &quot;Sheet&quot;</div>
<div class="line">CRC32.bstr(&quot;JS&quot;, crc32)                         // -1647298270  &quot;SheetJS&quot;</div>
<div class="line"> </div>
<div class="line">[CRC32.str(&quot;\u2603&quot;),  CRC32.str(&quot;\u0003&quot;)]     // [ -1743909036,  1259060791 ]</div>
<div class="line">[CRC32.bstr(&quot;\u2603&quot;), CRC32.bstr(&quot;\u0003&quot;)]    // [  1259060791,  1259060791 ]</div>
<div class="line">[CRC32.buf([0x2603]),  CRC32.buf([0x0003])]     // [  1259060791,  1259060791 ]</div>
<div class="line"> </div>
<div class="line">// var CRC32C = require(&#39;crc-32/crc32c&#39;);       // uncomment this line if in node</div>
<div class="line">CRC32C.str(&quot;SheetJS&quot;)                           // -284764294</div>
<div class="line">CRC32C.bstr(&quot;SheetJS&quot;)                          // -284764294</div>
<div class="line">CRC32C.buf([ 83, 104, 101, 101, 116, 74, 83 ])  // -284764294</div>
<div class="line"> </div>
<div class="line">crc32c = CRC32C.buf([83, 104])                  // -297065629   &quot;Sh&quot;</div>
<div class="line">crc32c = CRC32C.str(&quot;eet&quot;, crc32c)              //  1241364256  &quot;Sheet&quot;</div>
<div class="line">CRC32C.bstr(&quot;JS&quot;, crc32c)                       // -284764294   &quot;SheetJS&quot;</div>
<div class="line"> </div>
<div class="line">[CRC32C.str(&quot;\u2603&quot;),  CRC32C.str(&quot;\u0003&quot;)]   // [  1253703093,  1093509285 ]</div>
<div class="line">[CRC32C.bstr(&quot;\u2603&quot;), CRC32C.bstr(&quot;\u0003&quot;)]  // [  1093509285,  1093509285 ]</div>
<div class="line">[CRC32C.buf([0x2603]),  CRC32C.buf([0x0003])]   // [  1093509285,  1093509285 ]</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md3583"></a>
Best Practices</h2>
<p>Even though the initial seed is optional, for performance reasons it is highly recommended to explicitly pass the default seed 0.</p>
<p>In NodeJS with the native Buffer implementation, it is oftentimes faster to convert binary strings with <code>Buffer.from(bstr, "binary")</code> first:</p>
<div class="fragment"><div class="line">/* Frequently slower in NodeJS */</div>
<div class="line">crc32 = CRC32.bstr(bstr, 0);</div>
<div class="line">/* Frequently faster in NodeJS */</div>
<div class="line">crc32 = CRC32.buf(Buffer.from(bstr, &quot;binary&quot;), 0);</div>
</div><!-- fragment --><p>This does not apply to browser <code>Buffer</code> shims, and thus is not implemented in the library directly.</p>
<h1><a class="anchor" id="autotoc_md3584"></a>
Testing</h1>
<p><code>make test</code> will run the nodejs-based test.</p>
<p>To run the in-browser tests, run a local server and go to the <code>ctest</code> directory. <code>make ctestserv</code> will start a python <code>SimpleHTTPServer</code> server on port 8000.</p>
<p>To update the browser artifacts, run <code>make ctest</code>.</p>
<p>To generate the bits file, use the <code>crc32</code> function from python <code>zlib</code>:</p>
<div class="fragment"><div class="line">&gt;&gt;&gt; <span class="keyword">from</span> zlib <span class="keyword">import</span> crc32</div>
<div class="line">&gt;&gt;&gt; x=<span class="stringliteral">&quot;foo bar baz٪☃🍣&quot;</span></div>
<div class="line">&gt;&gt;&gt; crc32(x)</div>
<div class="line">1531648243</div>
<div class="line">&gt;&gt;&gt; crc32(x+x)</div>
<div class="line">-218791105</div>
<div class="line">&gt;&gt;&gt; crc32(x+x+x)</div>
<div class="line">1834240887</div>
</div><!-- fragment --><p>The included <code>crc32.njs</code> script can process files or standard input:</p>
<div class="fragment"><div class="line">$ echo &quot;this is a test&quot; &gt; t.txt</div>
<div class="line">$ bin/crc32.njs t.txt</div>
<div class="line">1912935186</div>
</div><!-- fragment --><p>For comparison, the included <code>crc32.py</code> script uses python <code>zlib</code>:</p>
<div class="fragment"><div class="line">$ bin/crc32.py t.txt</div>
<div class="line">1912935186</div>
</div><!-- fragment --><p>On OSX the command <code>cksum</code> generates unsigned CRC-32 with Algorithm 3:</p>
<div class="fragment"><div class="line">$ cksum -o 3 &lt; IE8.Win7.For.Windows.VMware.zip</div>
<div class="line">1891069052 4161613172</div>
<div class="line">$ crc32 --unsigned ~/Downloads/IE8.Win7.For.Windows.VMware.zip</div>
<div class="line">1891069052</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md3585"></a>
Performance</h1>
<p><code>make perf</code> will run algorithmic performance tests (which should justify certain decisions in the code).</p>
<p>The <a href="http://git.io/adler32"><code>adler-32</code> project</a> has more performance notes</p>
<h1><a class="anchor" id="autotoc_md3586"></a>
License</h1>
<p>Please consult the attached LICENSE file for details. All rights not explicitly granted by the Apache 2.0 license are reserved by the Original Author.</p>
<h1><a class="anchor" id="autotoc_md3587"></a>
Badges</h1>
<p><a href="https://saucelabs.com/u/crc32"><img src="https://saucelabs.com/browser-matrix/crc32.svg" alt="Sauce Test Status" style="pointer-events: none;" class="inline"/></a></p>
<p><a href="https://travis-ci.org/SheetJS/js-crc32"><img src="https://travis-ci.org/SheetJS/js-crc32.svg?branch=master" alt="Build Status" style="pointer-events: none;" class="inline"/></a> <a href="https://coveralls.io/r/SheetJS/js-crc32?branch=master"><img src="http://img.shields.io/coveralls/SheetJS/js-crc32/master.svg" alt="Coverage Status" style="pointer-events: none;" class="inline"/></a> <a href="https://david-dm.org/sheetjs/js-crc32"><img src="https://david-dm.org/sheetjs/js-crc32/status.svg" alt="Dependencies Status" style="pointer-events: none;" class="inline"/></a> <a href="https://npmjs.org/package/crc-32"><img src="https://img.shields.io/npm/dt/crc-32.svg" alt="NPM Downloads" style="pointer-events: none;" class="inline"/></a> <a href="https://ghit.me/repo/sheetjs/js-xlsx"><img src="https://ghit.me/badge.svg?repo=sheetjs/js-xlsx" alt="ghit.me" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/SheetJS/js-crc32"><img src="https://ga-beacon.appspot.com/UA-36810333-1/SheetJS/js-crc32?pixel" alt="Analytics" class="inline"/></a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
