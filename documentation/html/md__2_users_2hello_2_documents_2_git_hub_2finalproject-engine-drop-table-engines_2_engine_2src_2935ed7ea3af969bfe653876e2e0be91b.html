<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: Electron Rebuild</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Electron Rebuild</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md658"></a></p>
<p><a href="https://circleci.com/gh/electron/rebuild"><img src="https://circleci.com/gh/electron/rebuild.svg?style=svg" alt="CircleCI" style="pointer-events: none;" class="inline"/></a> <a href="https://npm.im/@electron/rebuild"><img src="https://img.shields.io/npm/v/@electron/rebuild.svg?style=flat" alt="NPM" style="pointer-events: none;" class="inline"/></a> <a href="https://codecov.io/gh/electron/rebuild"><img src="https://codecov.io/gh/electron/rebuild/branch/main/graph/badge.svg" alt="Coverage Status" style="pointer-events: none;" class="inline"/></a></p>
<p>This executable rebuilds native Node.js modules against the version of Node.js that your Electron project is using. This allows you to use native Node.js modules in Electron apps without your system version of Node.js matching exactly (which is often not the case, and sometimes not even possible).</p>
<h2><a class="anchor" id="autotoc_md659"></a>
How does it work?</h2>
<p>Install the package with <code>--save-dev</code>:</p>
<div class="fragment"><div class="line">npm install --save-dev @electron/rebuild</div>
</div><!-- fragment --><p>Then, whenever you install a new npm package, rerun electron-rebuild:</p>
<div class="fragment"><div class="line">$(npm bin)/electron-rebuild</div>
</div><!-- fragment --><p>Or if you're on Windows:</p>
<div class="fragment"><div class="line">.\node_modules\.bin\electron-rebuild.cmd</div>
</div><!-- fragment --><p> If you have a good node-gyp config but you see an error about a missing element on Windows like <code>Could not load the Visual C++ component "VCBuild.exe"</code>, try to launch electron-rebuild in an npm script:</p>
<div class="fragment"><div class="line">&quot;scripts&quot;: {</div>
<div class="line">  &quot;rebuild&quot;: &quot;electron-rebuild -f -w yourmodule&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><p>and then</p>
<div class="fragment"><div class="line">npm run rebuild</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md660"></a>
What are the requirements?</h2>
<p>Node v12.13.0 or higher is required. Building native modules from source uses <a href="https://github.com/nodejs/node-gyp#installation"><code>node-gyp</code></a>, refer to the link for its installation/runtime requirements.</p>
<h2><a class="anchor" id="autotoc_md661"></a>
CLI Arguments</h2>
<div class="fragment"><div class="line">Usage: electron-rebuild --version [version] --module-dir [path]</div>
<div class="line"> </div>
<div class="line">Options:</div>
<div class="line">  -v, --version                The version of Electron to build against [string]</div>
<div class="line">  -f, --force                  Force rebuilding modules, even if we would skip</div>
<div class="line">                               it otherwise                            [boolean]</div>
<div class="line">  -a, --arch                   Override the target architecture to something</div>
<div class="line">                               other than your system&#39;s                 [string]</div>
<div class="line">  -m, --module-dir             The path to the node_modules directory to rebuild</div>
<div class="line">                                                                        [string]</div>
<div class="line">  -w, --which-module           A specific module to build, or comma separated</div>
<div class="line">                               list of modules. Modules will only be rebuilt if</div>
<div class="line">                               they also match the types of dependencies being</div>
<div class="line">                               rebuilt (see --types).                   [string]</div>
<div class="line">  -o, --only                   Only build specified module, or comma separated</div>
<div class="line">                               list of modules. All others are ignored. [string]</div>
<div class="line">  -e, --electron-prebuilt-dir  The path to the prebuilt electron module [string]</div>
<div class="line">  -d, --dist-url               Custom header tarball URL                [string]</div>
<div class="line">  -t, --types                  The types of dependencies to rebuild.  Comma</div>
<div class="line">                               separated list of &quot;prod&quot;, &quot;dev&quot; and &quot;optional&quot;.</div>
<div class="line">                               Default is &quot;prod,optional&quot;               [string]</div>
<div class="line">  -p, --parallel               Rebuild in parallel, this is enabled by default</div>
<div class="line">                               on macOS and Linux                      [boolean]</div>
<div class="line">  -s, --sequential             Rebuild modules sequentially, this is enabled by</div>
<div class="line">                               default on Windows                      [boolean]</div>
<div class="line">  -b, --debug                  Build debug version of modules          [boolean]</div>
<div class="line">      --prebuild-tag-prefix    GitHub tag prefix passed to prebuild-install.</div>
<div class="line">                               Default is &quot;v&quot;                           [string]</div>
<div class="line">      --force-abi              Override the ABI version for the version of</div>
<div class="line">                               Electron you are targeting.  Only use when</div>
<div class="line">                               targeting Nightly releases.              [number]</div>
<div class="line">      --use-electron-clang     Use the clang executable that Electron used when</div>
<div class="line">                               building its binary. This will guarantee compiler</div>
<div class="line">                               compatibility                           [boolean]</div>
<div class="line">      --disable-pre-gyp-copy   Disables the pre-gyp copy step          [boolean]</div>
<div class="line">      --build-from-source      Skips prebuild download and rebuilds module from</div>
<div class="line">                               source.                                 [boolean]</div>
<div class="line">  -h, --help                   Show help                               [boolean]</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md662"></a>
How can I use this with <a href="https://github.com/electron/forge">Electron Forge</a>?</h2>
<p>This package is automatically used with Electron Forge when packaging an Electron app.</p>
<h2><a class="anchor" id="autotoc_md663"></a>
How can I integrate this into <a href="https://github.com/electron/packager">Electron Packager</a>?</h2>
<p>electron-rebuild provides a function compatible with the <a href="https://electron.github.io/packager/main/interfaces/electronpackager.options.html#aftercopy"><code>afterCopy</code> hook</a> for Electron Packager. For example:</p>
<div class="fragment"><div class="line">import packager from &#39;@electron/packager&#39;;</div>
<div class="line">import rebuild from &#39;@electron/rebuild&#39;;</div>
<div class="line"> </div>
<div class="line">packager({</div>
<div class="line">  // … other options</div>
<div class="line">  afterCopy: [(buildPath, electronVersion, platform, arch, callback) =&gt; {</div>
<div class="line">    rebuild({ buildPath, electronVersion, arch })</div>
<div class="line">      .then(() =&gt; callback())</div>
<div class="line">      .catch((error) =&gt; callback(error));</div>
<div class="line">  }],</div>
<div class="line">  // … other options</div>
<div class="line">});</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md664"></a>
How can I integrate this with <a href="https://github.com/prebuild/prebuild">prebuild</a>?</h2>
<p>If your module uses <a href="https://github.com/prebuild/prebuild">prebuild</a> for creating prebuilt binaries, it also uses <a href="https://github.com/prebuild/prebuild-install">prebuild-install</a> to download them. If this is the case, then <code>electron-rebuild</code> will run <code>prebuild-install</code> to download the correct binaries from the project's GitHub Releases instead of rebuilding them.</p>
<h2><a class="anchor" id="autotoc_md665"></a>
How can I integrate this into Grunt / Gulp / Whatever?</h2>
<p>electron-rebuild is also a library that you can require into your app or build process. It has a very simple API:</p>
<div class="fragment"><div class="line">import rebuild from &#39;@electron/rebuild&#39;;</div>
<div class="line"> </div>
<div class="line">// Public: Rebuilds a node_modules directory with the given Electron version.</div>
<div class="line">//</div>
<div class="line">// options: Object with the following properties</div>
<div class="line">//     buildPath - An absolute path to your app&#39;s directory.  (The directory that contains your node_modules)</div>
<div class="line">//     electronVersion - The version of Electron to rebuild for</div>
<div class="line">//     arch (optional) - Default: process.arch - The arch to rebuild for</div>
<div class="line">//     extraModules (optional) - Default: [] - An array of modules to rebuild as well as the detected modules</div>
<div class="line">//     onlyModules (optional) - Default: null - An array of modules to rebuild, ONLY these module names will be rebuilt.</div>
<div class="line">//                                              The &quot;types&quot; property will be ignored if this option is set.</div>
<div class="line">//     force (optional) - Default: false - Force a rebuild of modules regardless of their current build state</div>
<div class="line">//     headerURL (optional) - Default: https://www.electronjs.org/headers - The URL to download Electron header files from</div>
<div class="line">//     types (optional) - Default: [&#39;prod&#39;, &#39;optional&#39;] - The types of modules to rebuild</div>
<div class="line">//     mode (optional) - The rebuild mode, either &#39;sequential&#39; or &#39;parallel&#39; - Default varies per platform (probably shouldn&#39;t mess with this one)</div>
<div class="line">//     useElectronClang (optional) - Whether to use the clang executable that Electron used when building its binary. This will guarantee compiler compatibility</div>
<div class="line"> </div>
<div class="line">// Returns a Promise indicating whether the operation succeeded or not</div>
</div><!-- fragment --><p>A full build process might look something like:</p>
<div class="fragment"><div class="line">const childProcess = require(&#39;child_process&#39;);</div>
<div class="line">const pathToElectron = require(&#39;electron&#39;);</div>
<div class="line"> </div>
<div class="line">  rebuild({</div>
<div class="line">    buildPath: __dirname,</div>
<div class="line">    electronVersion: &#39;1.4.12&#39;</div>
<div class="line">  })</div>
<div class="line">    .then(() =&gt; console.info(&#39;Rebuild Successful&#39;))</div>
<div class="line">    .catch((e) =&gt; {</div>
<div class="line">      console.error(&quot;Building modules didn&#39;t work!&quot;);</div>
<div class="line">      console.error(e);</div>
<div class="line">    });</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
