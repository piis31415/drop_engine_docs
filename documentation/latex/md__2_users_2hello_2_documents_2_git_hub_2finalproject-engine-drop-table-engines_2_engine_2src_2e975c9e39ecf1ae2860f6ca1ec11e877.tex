\chapter{Async\+Worker}
\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877}{}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877}\index{AsyncWorker@{AsyncWorker}}
\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7629}%
\Hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7629}%


{\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}} is an abstract class that you can subclass to remove many of the tedious tasks of moving data between the event loop and worker threads. This class internally handles all the details of creating and executing an asynchronous operation.

Once created, execution is requested by calling {\ttfamily Napi\+::\+Async\+Worker\+::\+Queue}. When a thread is available for execution the {\ttfamily Napi\+::\+Async\+Worker\+::\+Execute} method will be invoked. Once {\ttfamily Napi\+::\+Async\+Worker\+::\+Execute} completes either {\ttfamily Napi\+::\+Async\+Worker\+::\+On\+OK} or {\ttfamily Napi\+::\+Async\+Worker\+::\+On\+Error} will be invoked. Once the {\ttfamily Napi\+::\+Async\+Worker\+::\+On\+OK} or {\ttfamily Napi\+::\+Async\+Worker\+::\+On\+Error} methods are complete the {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}} instance is destructed.

For the most basic use, only the {\ttfamily Napi\+::\+Async\+Worker\+::\+Execute} method must be implemented in a subclass.\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7630}{}\doxysection{\texorpdfstring{Methods}{Methods}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7630}
\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7631}{}\doxysubsection{\texorpdfstring{Env}{Env}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7631}
Requests the environment in which the async worker has been initially created.


\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{class_napi_1_1_env}{Napi::Env}}\ Napi::AsyncWorker::Env()\ \textcolor{keyword}{const};}

\end{DoxyCode}


Returns the environment in which the async worker has been created.\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7632}{}\doxysubsection{\texorpdfstring{Queue}{Queue}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7632}
Requests that the work be queued for execution.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{void}\ Napi::AsyncWorker::Queue();}

\end{DoxyCode}
\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7633}{}\doxysubsection{\texorpdfstring{Cancel}{Cancel}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7633}
Cancels queued work if it has not yet been started. If it has already started executing, it cannot be cancelled. If cancelled successfully neither {\ttfamily On\+OK} nor {\ttfamily On\+Error} will be called.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{void}\ Napi::AsyncWorker::Cancel();}

\end{DoxyCode}
\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7634}{}\doxysubsection{\texorpdfstring{Receiver}{Receiver}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7634}

\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{class_napi_1_1_object_reference}{Napi::ObjectReference}}\&\ Napi::AsyncWorker::Receiver();}

\end{DoxyCode}


Returns the persistent object reference of the receiver object set when the async worker was created.\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7635}{}\doxysubsection{\texorpdfstring{Callback}{Callback}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7635}

\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{class_napi_1_1_function_reference}{Napi::FunctionReference}}\&\ Napi::AsyncWorker::Callback();}

\end{DoxyCode}


Returns the persistent function reference of the callback set when the async worker was created. The returned function reference will receive the results of the computation that happened in the {\ttfamily Napi\+::\+Async\+Worker\+::\+Execute} method, unless the default implementation of {\ttfamily Napi\+::\+Async\+Worker\+::\+On\+OK} or {\ttfamily Napi\+::\+Async\+Worker\+::\+On\+Error} is overridden.\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7636}{}\doxysubsection{\texorpdfstring{Suppress\+Destruct}{Suppress\+Destruct}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7636}

\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{void}\ Napi::AsyncWorker::SuppressDestruct();}

\end{DoxyCode}


Prevents the destruction of the {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}} instance upon completion of the {\ttfamily Napi\+::\+Async\+Worker\+::\+On\+OK} callback.\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7637}{}\doxysubsection{\texorpdfstring{Set\+Error}{Set\+Error}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7637}
Sets the error message for the error that happened during the execution. Setting an error message will cause the {\ttfamily Napi\+::\+Async\+Worker\+::\+On\+Error} method to be invoked instead of {\ttfamily Napi\+::\+Async\+Worker\+::\+On\+OK} once the {\ttfamily Napi\+::\+Async\+Worker\+::\+Execute} method completes.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{void}\ Napi::AsyncWorker::SetError(\textcolor{keyword}{const}\ std::string\&\ error);}

\end{DoxyCode}



\begin{DoxyItemize}
\item {\ttfamily \mbox{[}in\mbox{]} error}\+: The reference to the string that represent the message of the error.
\end{DoxyItemize}\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7638}{}\doxysubsection{\texorpdfstring{Execute}{Execute}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7638}
This method is used to execute some tasks out of the {\bfseries{event loop}} on a libuv worker thread. Subclasses must implement this method and the method is run on a thread other than that running the main event loop. As the method is not running on the main event loop, it must avoid calling any methods from node-\/addon-\/api or running any code that might invoke Java\+Script. Instead, once this method is complete any interaction through node-\/addon-\/api with Java\+Script should be implemented in the {\ttfamily Napi\+::\+Async\+Worker\+::\+On\+OK} method which runs on the main thread and is invoked when the {\ttfamily Napi\+::\+Async\+Worker\+::\+Execute} method completes.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ Napi::AsyncWorker::Execute()\ =\ 0;}

\end{DoxyCode}
\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7639}{}\doxysubsection{\texorpdfstring{On\+OK}{On\+OK}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7639}
This method is invoked when the computation in the {\ttfamily Execute} method ends. The default implementation runs the Callback optionally provided when the Async\+Worker class was created. The callback will by default receive no arguments. To provide arguments, override the {\ttfamily Get\+Result()} method.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ Napi::AsyncWorker::OnOK();}

\end{DoxyCode}
 \hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7640}{}\doxysubsection{\texorpdfstring{Get\+Result}{Get\+Result}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7640}
This method returns the arguments passed to the Callback invoked by the default {\ttfamily On\+OK()} implementation. The default implementation returns an empty vector, providing no arguments to the Callback.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{virtual}\ std::vector<napi\_value>\ Napi::AsyncWorker::GetResult(\mbox{\hyperlink{class_napi_1_1_env}{Napi::Env}}\ env);}

\end{DoxyCode}
\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7641}{}\doxysubsection{\texorpdfstring{On\+Error}{On\+Error}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7641}
This method is invoked after {\ttfamily Napi\+::\+Async\+Worker\+::\+Execute} completes if an error occurs while {\ttfamily Napi\+::\+Async\+Worker\+::\+Execute} is running and C++ exceptions are enabled or if an error was set through a call to {\ttfamily Napi\+::\+Async\+Worker\+::\+Set\+Error}. The default implementation calls the callback provided when the {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}} class was created, passing in the error as the first parameter.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ Napi::AsyncWorker::OnError(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_napi_1_1_error}{Napi::Error}}\&\ e);}

\end{DoxyCode}
\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7642}{}\doxysubsection{\texorpdfstring{Destroy}{Destroy}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7642}
This method is invoked when the instance must be deallocated. If {\ttfamily Suppress\+Destruct()} was not called then this method will be called after either {\ttfamily On\+Error()} or {\ttfamily On\+OK()} complete. The default implementation of this method causes the instance to delete itself using the {\ttfamily delete} operator. The method is provided so as to ensure that instances allocated by means other than the {\ttfamily new} operator can be deallocated upon work completion.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ Napi::AsyncWorker::Destroy();}

\end{DoxyCode}
\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7643}{}\doxysubsection{\texorpdfstring{Constructor}{Constructor}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7643}
Creates a new {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{explicit}\ \mbox{\hyperlink{class_napi_1_1_async_worker}{Napi::AsyncWorker}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_napi_1_1_function}{Napi::Function}}\&\ callback);}

\end{DoxyCode}



\begin{DoxyItemize}
\item {\ttfamily \mbox{[}in\mbox{]} callback}\+: The function which will be called when an asynchronous operations ends. The given function is called from the main event loop thread.
\end{DoxyItemize}

Returns a {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}} instance which can later be queued for execution by calling {\ttfamily Queue}.\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7644}{}\doxysubsection{\texorpdfstring{Constructor}{Constructor}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7644}
Creates a new {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{explicit}\ \mbox{\hyperlink{class_napi_1_1_async_worker}{Napi::AsyncWorker}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_napi_1_1_function}{Napi::Function}}\&\ callback,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ resource\_name);}

\end{DoxyCode}



\begin{DoxyItemize}
\item {\ttfamily \mbox{[}in\mbox{]} callback}\+: The function which will be called when an asynchronous operations ends. The given function is called from the main event loop thread.
\item {\ttfamily \mbox{[}in\mbox{]} resource\+\_\+name}\+: Null-\/terminated strings that represents the identifier for the kind of resource that is being provided for diagnostic information exposed by the async\+\_\+hooks API.
\end{DoxyItemize}

Returns a {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}} instance which can later be queued for execution by calling {\ttfamily Napi\+::\+Async\+Work\+::\+Queue}.\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7645}{}\doxysubsection{\texorpdfstring{Constructor}{Constructor}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7645}
Creates a new {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{explicit}\ \mbox{\hyperlink{class_napi_1_1_async_worker}{Napi::AsyncWorker}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_napi_1_1_function}{Napi::Function}}\&\ callback,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ resource\_name,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_napi_1_1_object}{Napi::Object}}\&\ resource);}

\end{DoxyCode}



\begin{DoxyItemize}
\item {\ttfamily \mbox{[}in\mbox{]} callback}\+: The function which will be called when an asynchronous operations ends. The given function is called from the main event loop thread.
\item {\ttfamily \mbox{[}in\mbox{]} resource\+\_\+name}\+: Null-\/terminated strings that represents the identifier for the kind of resource that is being provided for diagnostic information exposed by the async\+\_\+hooks API.
\item {\ttfamily \mbox{[}in\mbox{]} resource}\+: Object associated with the asynchronous operation that will be passed to possible async\+\_\+hooks.
\end{DoxyItemize}

Returns a {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}} instance which can later be queued for execution by calling {\ttfamily Napi\+::\+Async\+Work\+::\+Queue}.\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7646}{}\doxysubsection{\texorpdfstring{Constructor}{Constructor}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7646}
Creates a new {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{explicit}\ \mbox{\hyperlink{class_napi_1_1_async_worker}{Napi::AsyncWorker}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_napi_1_1_object}{Napi::Object}}\&\ receiver,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_napi_1_1_function}{Napi::Function}}\&\ callback);}

\end{DoxyCode}



\begin{DoxyItemize}
\item {\ttfamily \mbox{[}in\mbox{]} receiver}\+: The {\ttfamily this} object passed to the called function.
\item {\ttfamily \mbox{[}in\mbox{]} callback}\+: The function which will be called when an asynchronous operations ends. The given function is called from the main event loop thread.
\end{DoxyItemize}

Returns a {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}} instance which can later be queued for execution by calling {\ttfamily Napi\+::\+Async\+Work\+::\+Queue}.\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7647}{}\doxysubsection{\texorpdfstring{Constructor}{Constructor}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7647}
Creates a new {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{explicit}\ \mbox{\hyperlink{class_napi_1_1_async_worker}{Napi::AsyncWorker}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_napi_1_1_object}{Napi::Object}}\&\ receiver,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_napi_1_1_function}{Napi::Function}}\&\ callback,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ resource\_name);}

\end{DoxyCode}



\begin{DoxyItemize}
\item {\ttfamily \mbox{[}in\mbox{]} receiver}\+: The {\ttfamily this} object passed to the called function.
\item {\ttfamily \mbox{[}in\mbox{]} callback}\+: The function which will be called when an asynchronous operations ends. The given function is called from the main event loop thread.
\item {\ttfamily \mbox{[}in\mbox{]} resource\+\_\+name}\+: Null-\/terminated strings that represents the identifier for the kind of resource that is being provided for diagnostic information exposed by the async\+\_\+hooks API.
\end{DoxyItemize}

Returns a {\ttfamily Napi\+::\+Async\+Work} instance which can later be queued for execution by calling {\ttfamily Napi\+::\+Async\+Work\+::\+Queue}.\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7648}{}\doxysubsection{\texorpdfstring{Constructor}{Constructor}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7648}
Creates a new {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{explicit}\ \mbox{\hyperlink{class_napi_1_1_async_worker}{Napi::AsyncWorker}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_napi_1_1_object}{Napi::Object}}\&\ receiver,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_napi_1_1_function}{Napi::Function}}\&\ callback,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ resource\_name,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_napi_1_1_object}{Napi::Object}}\&\ resource);}

\end{DoxyCode}



\begin{DoxyItemize}
\item {\ttfamily \mbox{[}in\mbox{]} receiver}\+: The {\ttfamily this} object passed to the called function.
\item {\ttfamily \mbox{[}in\mbox{]} callback}\+: The function which will be called when an asynchronous operations ends. The given function is called from the main event loop thread.
\item {\ttfamily \mbox{[}in\mbox{]} resource\+\_\+name}\+: Null-\/terminated strings that represents the identifier for the kind of resource that is being provided for diagnostic information exposed by the async\+\_\+hooks API.
\item {\ttfamily \mbox{[}in\mbox{]} resource}\+: Object associated with the asynchronous operation that will be passed to possible async\+\_\+hooks.
\end{DoxyItemize}

Returns a {\ttfamily Napi\+::\+Async\+Work} instance which can later be queued for execution by calling {\ttfamily Napi\+::\+Async\+Work\+::\+Queue}.\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7649}{}\doxysubsection{\texorpdfstring{Constructor}{Constructor}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7649}
Creates a new {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{explicit}\ \mbox{\hyperlink{class_napi_1_1_async_worker}{Napi::AsyncWorker}}(\mbox{\hyperlink{class_napi_1_1_env}{Napi::Env}}\ env);}

\end{DoxyCode}



\begin{DoxyItemize}
\item {\ttfamily \mbox{[}in\mbox{]} env}\+: The environment in which to create the {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}}.
\end{DoxyItemize}

Returns an {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}} instance which can later be queued for execution by calling {\ttfamily Napi\+::\+Async\+Worker\+::\+Queue}.\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7650}{}\doxysubsection{\texorpdfstring{Constructor}{Constructor}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7650}
Creates a new {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{explicit}\ \mbox{\hyperlink{class_napi_1_1_async_worker}{Napi::AsyncWorker}}(\mbox{\hyperlink{class_napi_1_1_env}{Napi::Env}}\ env,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ resource\_name);}

\end{DoxyCode}



\begin{DoxyItemize}
\item {\ttfamily \mbox{[}in\mbox{]} env}\+: The environment in which to create the {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}}.
\item {\ttfamily \mbox{[}in\mbox{]} resource\+\_\+name}\+: Null-\/terminated strings that represents the identifier for the kind of resource that is being provided for diagnostic information exposed by the async\+\_\+hooks API.
\end{DoxyItemize}

Returns a {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}} instance which can later be queued for execution by calling {\ttfamily Napi\+::\+Async\+Worker\+::\+Queue}.\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7651}{}\doxysubsection{\texorpdfstring{Constructor}{Constructor}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7651}
Creates a new {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{explicit}\ \mbox{\hyperlink{class_napi_1_1_async_worker}{Napi::AsyncWorker}}(\mbox{\hyperlink{class_napi_1_1_env}{Napi::Env}}\ env,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ resource\_name,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_napi_1_1_object}{Napi::Object}}\&\ resource);}

\end{DoxyCode}



\begin{DoxyItemize}
\item {\ttfamily \mbox{[}in\mbox{]} env}\+: The environment in which to create the {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}}.
\item {\ttfamily \mbox{[}in\mbox{]} resource\+\_\+name}\+: Null-\/terminated strings that represents the identifier for the kind of resource that is being provided for diagnostic information exposed by the async\+\_\+hooks API.
\item {\ttfamily \mbox{[}in\mbox{]} resource}\+: Object associated with the asynchronous operation that will be passed to possible async\+\_\+hooks.
\end{DoxyItemize}

Returns a {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}} instance which can later be queued for execution by calling {\ttfamily Napi\+::\+Async\+Worker\+::\+Queue}.\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7652}{}\doxysubsection{\texorpdfstring{Destructor}{Destructor}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7652}
Deletes the created work object that is used to execute logic asynchronously.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{virtual}\ Napi::AsyncWorker::\string~AsyncWorker();}

\end{DoxyCode}
\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7653}{}\doxysection{\texorpdfstring{Operator}{Operator}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7653}

\begin{DoxyCode}{0}
\DoxyCodeLine{Napi::AsyncWorker::operator\ napi\_async\_work()\ \textcolor{keyword}{const};}

\end{DoxyCode}


Returns the N-\/\+API napi\+\_\+async\+\_\+work wrapped by the {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}} object. This can be used to mix usage of the C N-\/\+API and node-\/addon-\/api.\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7654}{}\doxysection{\texorpdfstring{Example}{Example}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2e975c9e39ecf1ae2860f6ca1ec11e877_autotoc_md7654}
The first step to use the {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}} class is to create a new class that inherits from it and implement the {\ttfamily Napi\+::\+Async\+Worker\+::\+Execute} abstract method. Typically input to your worker will be saved within class\textquotesingle{} fields generally passed in through its constructor.

When the {\ttfamily Napi\+::\+Async\+Worker\+::\+Execute} method completes without errors the {\ttfamily Napi\+::\+Async\+Worker\+::\+On\+OK} function callback will be invoked. In this function the results of the computation will be reassembled and returned back to the initial Java\+Script context.

{\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}} ensures that all the code in the {\ttfamily Napi\+::\+Async\+Worker\+::\+Execute} function runs in the background out of the {\bfseries{event loop}} thread and at the end the {\ttfamily Napi\+::\+Async\+Worker\+::\+On\+OK} or {\ttfamily Napi\+::\+Async\+Worker\+::\+On\+Error} function will be called and are executed as part of the event loop.

The code below show a basic example of {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}} the implementation\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#include<napi.h>}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ <chrono>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ <thread>}}
\DoxyCodeLine{}
\DoxyCodeLine{use\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_napi}{Napi}};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{class\ }EchoWorker\ :\ \textcolor{keyword}{public}\ AsyncWorker\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{\ \ \ \ \ \ \ \ EchoWorker(Function\&\ callback,\ std::string\&\ echo)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ :\ AsyncWorker(callback),\ echo(echo)\ \{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \string~EchoWorker()\ \{\}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ This\ code\ will\ be\ executed\ on\ the\ worker\ thread}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ Execute()\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{comment}{//\ Need\ to\ simulate\ cpu\ heavy\ task}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ std::this\_thread::sleep\_for(std::chrono::seconds(1));}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ OnOK()\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ HandleScope\ scope(Env());}
\DoxyCodeLine{\ \ \ \ \ \ \ \ Callback().Call(\{Env().Null(),\ String::New(Env(),\ echo)\});}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{\ \ \ \ \ \ \ \ std::string\ echo;}
\DoxyCodeLine{\};}

\end{DoxyCode}


The {\ttfamily Echo\+Worker}\textquotesingle{}s contructor calls the base class\textquotesingle{} constructor to pass in the callback that the {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}} base class will store persistently. When the work on the {\ttfamily Napi\+::\+Async\+Worker\+::\+Execute} method is done the {\ttfamily Napi\+::\+Async\+Worker\+::\+On\+Ok} method is called and the results return back to Java\+Script invoking the stored callback with its associated environment.

The following code shows an example on how to create and use an {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}}


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#include<napi.h>}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Include\ EchoWorker\ class}}
\DoxyCodeLine{\textcolor{comment}{//\ ..}}
\DoxyCodeLine{}
\DoxyCodeLine{use\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_napi}{Napi}};}
\DoxyCodeLine{}
\DoxyCodeLine{Value\ Echo(\textcolor{keyword}{const}\ CallbackInfo\&\ info)\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ You\ need\ to\ check\ the\ input\ data\ here}}
\DoxyCodeLine{\ \ \ \ Function\ cb\ =\ info[1].As<Function>();}
\DoxyCodeLine{\ \ \ \ std::string\ in\ =\ info[0].As<String>();}
\DoxyCodeLine{\ \ \ \ EchoWorker*\ wk\ =\ \textcolor{keyword}{new}\ EchoWorker(cb,\ in);}
\DoxyCodeLine{\ \ \ \ wk-\/>Queue();}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{return}\ info.Env().Undefined();}

\end{DoxyCode}


Using the implementation of a {\ttfamily \doxylink{class_napi_1_1_async_worker}{Napi\+::\+Async\+Worker}} is straight forward. You only need to create a new instance and pass to its constructor the callback you want to execute when your asynchronous task ends and other data you need for your computation. Once created the only other action you have to do is to call the {\ttfamily Napi\+::\+Async\+Worker\+::\+Queue} method that will queue the created worker for execution. 