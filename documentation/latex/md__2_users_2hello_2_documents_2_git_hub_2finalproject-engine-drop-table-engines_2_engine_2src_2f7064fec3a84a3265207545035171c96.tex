\chapter{Archiver}
\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2f7064fec3a84a3265207545035171c96}{}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2f7064fec3a84a3265207545035171c96}\index{Archiver@{Archiver}}
\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2f7064fec3a84a3265207545035171c96_autotoc_md2390}%
\Hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2f7064fec3a84a3265207545035171c96_autotoc_md2390}%


A streaming interface for archive generation

Visit the \href{https://www.archiverjs.com/}{\texttt{ API documentation}} for a list of all methods available.\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2f7064fec3a84a3265207545035171c96_autotoc_md2391}{}\doxysection{\texorpdfstring{Install}{Install}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2f7064fec3a84a3265207545035171c96_autotoc_md2391}

\begin{DoxyCode}{0}
\DoxyCodeLine{npm\ install\ archiver\ -\/-\/save}

\end{DoxyCode}
\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2f7064fec3a84a3265207545035171c96_autotoc_md2392}{}\doxysection{\texorpdfstring{Quick Start}{Quick Start}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2f7064fec3a84a3265207545035171c96_autotoc_md2392}

\begin{DoxyCode}{0}
\DoxyCodeLine{//\ require\ modules}
\DoxyCodeLine{const\ fs\ =\ require('fs');}
\DoxyCodeLine{const\ archiver\ =\ require('archiver');}
\DoxyCodeLine{}
\DoxyCodeLine{//\ create\ a\ file\ to\ stream\ archive\ data\ to.}
\DoxyCodeLine{const\ output\ =\ fs.createWriteStream(\_\_dirname\ +\ '/example.zip');}
\DoxyCodeLine{const\ archive\ =\ archiver('zip',\ \{}
\DoxyCodeLine{\ \ zlib:\ \{\ level:\ 9\ \}\ //\ Sets\ the\ compression\ level.}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{//\ listen\ for\ all\ archive\ data\ to\ be\ written}
\DoxyCodeLine{//\ 'close'\ event\ is\ fired\ only\ when\ a\ file\ descriptor\ is\ involved}
\DoxyCodeLine{output.on('close',\ function()\ \{}
\DoxyCodeLine{\ \ console.log(archive.pointer()\ +\ '\ total\ bytes');}
\DoxyCodeLine{\ \ console.log('archiver\ has\ been\ finalized\ and\ the\ output\ file\ descriptor\ has\ closed.');}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{//\ This\ event\ is\ fired\ when\ the\ data\ source\ is\ drained\ no\ matter\ what\ was\ the\ data\ source.}
\DoxyCodeLine{//\ It\ is\ not\ part\ of\ this\ library\ but\ rather\ from\ the\ NodeJS\ Stream\ API.}
\DoxyCodeLine{//\ @see:\ https://nodejs.org/api/stream.html\#stream\_event\_end}
\DoxyCodeLine{output.on('end',\ function()\ \{}
\DoxyCodeLine{\ \ console.log('Data\ has\ been\ drained');}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{//\ good\ practice\ to\ catch\ warnings\ (ie\ stat\ failures\ and\ other\ non-\/blocking\ errors)}
\DoxyCodeLine{archive.on('warning',\ function(err)\ \{}
\DoxyCodeLine{\ \ if\ (err.code\ ===\ 'ENOENT')\ \{}
\DoxyCodeLine{\ \ \ \ //\ log\ warning}
\DoxyCodeLine{\ \ \}\ else\ \{}
\DoxyCodeLine{\ \ \ \ //\ throw\ error}
\DoxyCodeLine{\ \ \ \ throw\ err;}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{//\ good\ practice\ to\ catch\ this\ error\ explicitly}
\DoxyCodeLine{archive.on('error',\ function(err)\ \{}
\DoxyCodeLine{\ \ throw\ err;}
\DoxyCodeLine{\});}
\DoxyCodeLine{}
\DoxyCodeLine{//\ pipe\ archive\ data\ to\ the\ file}
\DoxyCodeLine{archive.pipe(output);}
\DoxyCodeLine{}
\DoxyCodeLine{//\ append\ a\ file\ from\ stream}
\DoxyCodeLine{const\ file1\ =\ \_\_dirname\ +\ '/file1.txt';}
\DoxyCodeLine{archive.append(fs.createReadStream(file1),\ \{\ name:\ 'file1.txt'\ \});}
\DoxyCodeLine{}
\DoxyCodeLine{//\ append\ a\ file\ from\ string}
\DoxyCodeLine{archive.append('string\ cheese!',\ \{\ name:\ 'file2.txt'\ \});}
\DoxyCodeLine{}
\DoxyCodeLine{//\ append\ a\ file\ from\ buffer}
\DoxyCodeLine{const\ buffer3\ =\ Buffer.from('buff\ it!');}
\DoxyCodeLine{archive.append(buffer3,\ \{\ name:\ 'file3.txt'\ \});}
\DoxyCodeLine{}
\DoxyCodeLine{//\ append\ a\ file}
\DoxyCodeLine{archive.file('file1.txt',\ \{\ name:\ 'file4.txt'\ \});}
\DoxyCodeLine{}
\DoxyCodeLine{//\ append\ files\ from\ a\ sub-\/directory\ and\ naming\ it\ \`{}new-\/subdir`\ within\ the\ archive}
\DoxyCodeLine{archive.directory('subdir/',\ 'new-\/subdir');}
\DoxyCodeLine{}
\DoxyCodeLine{//\ append\ files\ from\ a\ sub-\/directory,\ putting\ its\ contents\ at\ the\ root\ of\ archive}
\DoxyCodeLine{archive.directory('subdir/',\ false);}
\DoxyCodeLine{}
\DoxyCodeLine{//\ append\ files\ from\ a\ glob\ pattern}
\DoxyCodeLine{archive.glob('file*.txt',\ \{cwd:\_\_dirname\});}
\DoxyCodeLine{}
\DoxyCodeLine{//\ finalize\ the\ archive\ (ie\ we\ are\ done\ appending\ files\ but\ streams\ have\ to\ finish\ yet)}
\DoxyCodeLine{//\ 'close',\ 'end'\ or\ 'finish'\ may\ be\ fired\ right\ after\ calling\ this\ method\ so\ register\ to\ them\ beforehand}
\DoxyCodeLine{archive.finalize();}

\end{DoxyCode}
\hypertarget{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2f7064fec3a84a3265207545035171c96_autotoc_md2393}{}\doxysection{\texorpdfstring{Formats}{Formats}}\label{md__2_users_2hello_2_documents_2_git_hub_2finalproject-engine-drop-table-engines_2_engine_2src_2f7064fec3a84a3265207545035171c96_autotoc_md2393}
Archiver ships with out of the box support for TAR and ZIP archives.

You can register additional formats with {\ttfamily register\+Format}.

You can check if format already exists before to register a new one with {\ttfamily is\+Registered\+Format}.

{\itshape Formats will be changing in the future to implement a middleware approach.} 